version: "3.7"

networks:
    gitlab-ce:

services: 
    gitlab:
        container_name: gitlab-ce
        image: gitlab/gitlab-ce:12.3.9-ce.0
        # 设置容器的权限为root
        privileged: true
        restart: always
        ports:
            - 8080:80
            - 8443:443
        environment:
            GITLAB_OMNIBUS_CONFIG: |
                external_url 'http://0.0.0.0:8080'
                gitlab_rails['time_zone'] = 'PRC'
        volumes:
            - ./etc:/etc/gitlab
            - ./logs:/var/log/gitlab
            - ./data:/var/opt/gitlab
